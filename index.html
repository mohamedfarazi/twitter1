<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TwitterSoapBox</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>

    <script type="text/x-handlebars">
      <nav class="top-bar" data-topbar>
        <ul class="title-area">
          <li class="name">
            <h1><a href="#">TwitterSoapBox</a></h1>
          </li>
        </ul>
        <section class="top-bar-section">
          <ul class="left">
            <li>{{#link-to 'tweets'}}Tweets{{/link-to}}</li>
            <li>{{#link-to 'about'}}About{{/link-to}}</li>
          </ul>
        </section>
      </nav>
      <div class="margins">
        {{outlet}}
      </div>
    </script>

    <script type="text/x-handlebars" id="about">
      <div class="row">
        <div class="small-11 small-centered columns header-weight">
         <hr>
          <h1>What is this?</h1>
            <p>TwitterSoapBox is my attempt at building a simple one page application for Soapbox using Ember.js.</p>
          </br>
          <h1>What were the requirements?</h1>
            <p>A simple frontÂ­end application that shows a list of tweets for a user.</p>
          </br>
          <h1>What were the challenges?</h1>
            <p>Correctly setting up the controller and learning to #each over it. Luckily there are some good guides out there to help. </p>
          </br>
          <h1>What are your next steps?</h1>
            <p>Learning more about Ember and fully understanding its official guide. Following that, I would like to integrate Ember directly into a Rails app, and not have them be seperate.</p>
          <hr>
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" id="tweets">
        <div class="row">
          <div class="small-6 large-centered columns">
           <table class="table">
             <thead>
              <tr>
                <th colspan="3">{{view App.SearchTextField placeholder="Twitter username: e.g. mfarazi" valueBinding="App.tweetsController.username"}}
                <button class="button expand" {{action "loadTweets" target="App.tweetsController"}}>Go!</button>
                </th>
              </tr>
             </thead>
            </table>
              <hr>
              <h3 class="hidden">~Tweets~</h3>
              {{#each App.tweetsController}}
            <table class="table">

             <tr>
              <td>
                <img {{bind-attr src="user.profile_image_url"}} class="profile"/>
              </td>
              <td colspan="2">
                <strong>{{user.name}}</strong>
                <small class="muted">@{{user.screen_name}}</small>
                <small class="muted right">{{format-date created_at}}</small></br>
                 <p>{{text}}</p>
             </td>
            </tr>
            <tr class="align">
              <td>
                <small>Favourites:</br> {{favorite_count}}</small>
              </td>
              <td>
                {{#if entities.user_mentions}}
                <small>Mentions: </br>
                  {{#each entities.user_mentions}}
                    {{screen_name}};
                  {{/each}}
                </small>
                {{else}}
                  <small> No mentions :( </small>
                {{/if}}
              </td>
              <td>
                <small>RTs:</br> {{retweet_count}}</small>
              </td>
            </tr>

           </table>
          </div>
          {{/each}}
    </script>

    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script src="js/ember/handlebars-1.1.2.js"></script>
    <script src="js/ember/ember-1.4.0.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>
    <script src="js/app.js"></script>
    <script>
      $(document).foundation();
    </script>
  </body>
</html>
